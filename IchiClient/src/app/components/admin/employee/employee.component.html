<nav class="mb-2" aria-label="breadcrumb">
  <ol class="breadcrumb mb-0">
    <li class="breadcrumb-item"><a href="/admin">Trang chủ</a></li>
    <li class="breadcrumb-item">Quản lý danh mục</li>
    <li class="breadcrumb-item active">nhân viên</li>
  </ol>
</nav>
<div class="mb-9">
  <div class="row g-3 mb-4">
    <div class="col-auto">
      <h2 class="mb-0">Danh sách nhân viên</h2>
    </div>
  </div>
  <div id="customer">
    <div class="mb-4">
      <div class="row g-3">
        <div class="col-auto">
          <div class="search-box">
            <form class="position-relative">
              <input
                class="form-control search-input search"
                type="text"
                placeholder="Tìm kiếm nhân viên"
                name="searchTemp"
                (input)="search()"
                [(ngModel)]="searchTemp"
              />
              <span class="fas fa-search search-box-icon"></span>
            </form>
          </div>
        </div>
        <div class="col-auto ms-auto">
          <!-- <button
            class="btn btn-primary"
            data-bs-target="#modalemployee"
            data-bs-toggle="modal"
            (click)="openModalCreate()"
          >
            <span class="fas fa-plus me-2"></span>Thêm nhân viên
          </button> -->
        </div>
      </div>
    </div>
    <div
      class="mx-n4 px-4 mx-lg-n6 px-lg-6 bg-white border-top border-bottom border-200 position-relative top-1"
    >
      <div class="table-responsive scrollbar mx-n1 px-1">
        <table class="table fs--1 mb-0">
          <thead>
            <tr>
              <th
                class="white-space-nowrap fs--1 align-middle ps-0"
                style="max-width: 20px; width: 18px"
              >
                <div class="form-check mb-0 fs-0">
                  <input
                    class="form-check-input"
                    id="checkbox-bulk-products-select"
                    type="checkbox"
                    (input)="toggleSelectAll()"
                  />
                </div>
              </th>
              <th
                class="sort white-space-nowrap align-middle ps-4"
                scope="col"
                style="width: 200px"
                (click)="sortByField('fullName')"
              >
                Tên nhân viên
                <label
                  [class.d-none]="
                    SortBy === 'fullName' &&
                    (sortDir === 'DESC' || sortDir === 'ASC')
                  "
                >
                  <span class="fas fa-sort align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="SortBy !== 'fullName' || sortDir !== 'ASC'"
                >
                  <span class="fas fa-sort-up align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="SortBy !== 'fullName' || sortDir !== 'DESC'"
                >
                  <span class="fas fa-sort-down align-middle fs-9"></span>
                </label>
              </th>
              <th
                class="sort align-middle ps-4"
                scope="col"
                style="width: 150px"
                (click)="sortByField('PhoneNumber')"
              >
                Số điện thoại
                <label
                  [class.d-none]="
                    SortBy === 'PhoneNumber' &&
                    (sortDir === 'DESC' || sortDir === 'ASC')
                  "
                >
                  <span class="fas fa-sort align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="SortBy !== 'PhoneNumber' || sortDir !== 'ASC'"
                >
                  <span class="fas fa-sort-up align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="
                    SortBy !== 'PhoneNumber' || sortDir !== 'DESC'
                  "
                >
                  <span class="fas fa-sort-down align-middle fs-9"></span>
                </label>
              </th>
              <th
                class="sort align-middle ps-4"
                scope="col"
                style="width: 100px"
                (click)="sortByField('Gender')"
              >
                Giới tính
                <label
                  [class.d-none]="
                    SortBy === 'Gender' &&
                    (sortDir === 'DESC' || sortDir === 'ASC')
                  "
                >
                  <span class="fas fa-sort align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="SortBy !== 'Gender' || sortDir !== 'ASC'"
                >
                  <span class="fas fa-sort-up align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="SortBy !== 'Gender' || sortDir !== 'DESC'"
                >
                  <span class="fas fa-sort-down align-middle fs-9"></span>
                </label>
              </th>
              <th
                class="sort align-middle ps-4"
                scope="col"
                style="width: 150px"
                (click)="sortByField('Birthday')"
              >
                Ngày sinh
                <label
                  [class.d-none]="
                    SortBy === 'Birthday' &&
                    (sortDir === 'DESC' || sortDir === 'ASC')
                  "
                >
                  <span class="fas fa-sort align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="SortBy !== 'Birthday' || sortDir !== 'ASC'"
                >
                  <span class="fas fa-sort-up align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="SortBy !== 'Birthday' || sortDir !== 'DESC'"
                >
                  <span class="fas fa-sort-down align-middle fs-9"></span>
                </label>
              </th>
              <th
                class="sort align-middle ps-4"
                scope="col"
                style="width: 150px"
                (click)="sortByField('email')"
              >
                Địa chỉ
                <label
                  [class.d-none]="
                    SortBy === 'address' &&
                    (sortDir === 'DESC' || sortDir === 'ASC')
                  "
                >
                  <span class="fas fa-sort align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="SortBy !== 'address' || sortDir !== 'ASC'"
                >
                  <span class="fas fa-sort-up align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="SortBy !== 'address' || sortDir !== 'DESC'"
                >
                  <span class="fas fa-sort-down align-middle fs-9"></span>
                </label>
              </th>

              <th
                class="sort align-middle ps-4"
                scope="col"
                style="width: 150px"
                (click)="sortByField('email')"
              >
                Email
                <label
                  [class.d-none]="
                    SortBy === 'email' &&
                    (sortDir === 'DESC' || sortDir === 'ASC')
                  "
                >
                  <span class="fas fa-sort align-middle fs-9"></span>
                </label>
                <label [class.d-none]="SortBy !== 'email' || sortDir !== 'ASC'">
                  <span class="fas fa-sort-up align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="SortBy !== 'email' || sortDir !== 'DESC'"
                >
                  <span class="fas fa-sort-down align-middle fs-9"></span>
                </label>
              </th>
              <th
                class="sort align-middle ps-4"
                scope="col"
                style="width: 150px"
                (click)="sortByField('ModifiedDate')"
              >
                Ngày sửa
                <label
                  [class.d-none]="
                    SortBy === 'ModifiedDate' &&
                    (sortDir === 'DESC' || sortDir === 'ASC')
                  "
                >
                  <span class="fas fa-sort align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="
                    SortBy !== 'ModifiedDate' || sortDir !== 'ASC'
                  "
                >
                  <span class="fas fa-sort-up align-middle fs-9"></span>
                </label>
                <label
                  [class.d-none]="
                    SortBy !== 'ModifiedDate' || sortDir !== 'DESC'
                  "
                >
                  <span class="fas fa-sort-down align-middle fs-9"></span>
                </label>
              </th>
              <th
                class="sort text-end align-middle pe-0 ps-4"
                scope="col"
                style="width: 50px"
              ></th>
            </tr>
          </thead>
          <tbody class="list" id="customer-table-body">
            <tr *ngIf="paginationModel.content.length <= 0">
              <td colspan="7" class="text-center">
                <span class="fs-7">Không có dữ liệu</span>
              </td>
            </tr>
            <tr
              class="hover-actions-trigger btn-reveal-trigger position-static"
              *ngFor="let customer of paginationModel.content"
            >
              <td class="fs--1 align-middle">
                <div class="form-check mb-0 fs-0">
                  <input
                    class="form-check-input"
                    type="checkbox"
                    [value]="customer.id"
                    [checked]="selectAll"
                  />
                </div>
              </td>
              <td class="customer align-middle white-space-nowrap">
                <a
                  class="d-flex align-items-center text-body text-hover-1000"
                  href="#!"
                >
                  <div class="avatar avatar-m">
                    <img
                      class="rounded-circle"
                      src="{{ Environment.apiBaseRoot }}{{
                        customer.user.avatar
                      }}"
                      alt=""
                    />
                  </div>

                  <h6 class="mb-0 ms-3 fw-semibold">{{ customer.fullName }}</h6>
                </a>
              </td>
              <td class="align-middle text-600 ps-4">
                {{ customer.phoneNumber }}
              </td>
              <td class="align-middle text-600 ps-4">
                {{ customer.gender }}
              </td>
              <td class="align-middle text-600 ps-4">
                {{ customer.birthday | date : "dd/MM/yyyy" }}
              </td>
              <td class="align-middle text-600 ps-4">
                {{ customer.address }}
              </td>
              <td class="align-middle text-600 ps-4">
                {{ customer.user.email }}
              </td>

              <!-- <td class="align-middle white-space-nowrap text-600 ps-4">
                {{ customer.createDatetime | date : "dd/MM/yyyy HH:mm:ss" }}
              </td> -->
              <td class="align-middle white-space-nowrap text-600 ps-3">
                {{ customer.modifiedDate | date : "dd/MM/yyyy" }}
              </td>
              <!-- <td class="align-middle white-space-nowrap text-end pe-0">
                <div class="font-sans-serif btn-reveal-trigger position-static">
                  <button
                    class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs--2"
                    type="button"
                    data-bs-toggle="dropdown"
                    data-boundary="window"
                    aria-haspopup="true"
                    aria-expanded="false"
                    data-bs-reference="parent"
                  >
                    <span class="fas fa-ellipsis-h fs--2"></span>
                  </button>
                  <div class="dropdown-menu dropdown-menu-end py-2">
                    <button
                      class="dropdown-item"
                      data-bs-target="#modalemployee"
                      data-bs-toggle="modal"
                      (click)="openModalUpdate(customer)"
                    >
                      Cập nhật
                    </button>
                    <div class="dropdown-divider"></div>
                    <button
                      class="dropdown-item text-danger"
                      (click)="delete(customer.id)"
                    >
                      Xóa
                    </button>
                  </div>
                </div>
              </td> -->

              <td class="align-middle white-space-nowrap text-end pe-0">
                <div class="position-relative">
                  <div class="hover-actions">
                    <button
                      class="btn btn-sm btn-phoenix-secondary me-1 fs-10"
                      (click)="openModalUpdate(customer)"
                      data-bs-target="#modalemployee"
                      data-bs-toggle="modal"
                    >
                      <svg
                        class="svg-inline--fa fa-check"
                        aria-hidden="true"
                        focusable="false"
                        data-prefix="fas"
                        data-icon="check"
                        role="img"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 448 512"
                        data-fa-i2svg=""
                      >
                        <path
                          fill="currentColor"
                          d="M438.6 105.4C451.1 117.9 451.1 138.1 438.6 150.6L182.6 406.6C170.1 419.1 149.9 419.1 137.4 406.6L9.372 278.6C-3.124 266.1-3.124 245.9 9.372 233.4C21.87 220.9 42.13 220.9 54.63 233.4L159.1 338.7L393.4 105.4C405.9 92.88 426.1 92.88 438.6 105.4H438.6z"
                        ></path></svg
                      ><!-- <span class="fas fa-check"></span> Font Awesome fontawesome.com --></button
                    ><button
                      class="btn btn-sm btn-phoenix-secondary fs-10"
                      (click)="delete(customer.id)"
                    >
                      <svg
                        class="svg-inline--fa fa-trash"
                        aria-hidden="true"
                        focusable="false"
                        data-prefix="fas"
                        data-icon="trash"
                        role="img"
                        xmlns="http://www.w3.org/2000/svg"
                        viewBox="0 0 448 512"
                        data-fa-i2svg=""
                      >
                        <path
                          fill="currentColor"
                          d="M135.2 17.69C140.6 6.848 151.7 0 163.8 0H284.2C296.3 0 307.4 6.848 312.8 17.69L320 32H416C433.7 32 448 46.33 448 64C448 81.67 433.7 96 416 96H32C14.33 96 0 81.67 0 64C0 46.33 14.33 32 32 32H128L135.2 17.69zM394.8 466.1C393.2 492.3 372.3 512 346.9 512H101.1C75.75 512 54.77 492.3 53.19 466.1L31.1 128H416L394.8 466.1z"
                        ></path></svg
                      ><!-- <span class="fas fa-trash"></span> Font Awesome fontawesome.com -->
                    </button>
                  </div>
                </div>
                <div class="btn-reveal-trigger position-static">
                  <button
                    class="btn btn-sm dropdown-toggle dropdown-caret-none transition-none btn-reveal fs-10"
                    type="button"
                    data-bs-toggle="dropdown"
                    data-boundary="window"
                    aria-haspopup="true"
                    aria-expanded="false"
                    data-bs-reference="parent"
                  >
                    <svg
                      class="svg-inline--fa fa-ellipsis fs-10"
                      aria-hidden="true"
                      focusable="false"
                      data-prefix="fas"
                      data-icon="ellipsis"
                      role="img"
                      xmlns="http://www.w3.org/2000/svg"
                      viewBox="0 0 448 512"
                      data-fa-i2svg=""
                    >
                      <path
                        fill="currentColor"
                        d="M120 256C120 286.9 94.93 312 64 312C33.07 312 8 286.9 8 256C8 225.1 33.07 200 64 200C94.93 200 120 225.1 120 256zM280 256C280 286.9 254.9 312 224 312C193.1 312 168 286.9 168 256C168 225.1 193.1 200 224 200C254.9 200 280 225.1 280 256zM328 256C328 225.1 353.1 200 384 200C414.9 200 440 225.1 440 256C440 286.9 414.9 312 384 312C353.1 312 328 286.9 328 256z"
                      ></path></svg
                    ><!-- <span class="fas fa-ellipsis-h fs-10"></span> Font Awesome fontawesome.com -->
                  </button>
                  <div class="dropdown-menu dropdown-menu-end py-2">
                    <a class="dropdown-item" href="#!">View</a
                    ><a class="dropdown-item" href="#!">Export</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item text-danger" href="#!">Remove</a>
                  </div>
                </div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
      <div class="row align-items-center py-2 pe-0 fs--1">
        <div class="col-auto d-flex">
          <label>
            <select
              class="form-select form-select-sm form-select-solid"
              name="sizeSelected"
              [(ngModel)]="paginationModel.pageSize"
              (change)="changePageSize(paginationModel.pageSize)"
            >
              <option value="5" [selected]="paginationModel.pageSize == 5">
                5
              </option>
              <option value="10" [selected]="paginationModel.pageSize == 10">
                10
              </option>
              <option value="25" [selected]="paginationModel.pageSize == 25">
                25
              </option>
              <option value="50" [selected]="paginationModel.pageSize == 50">
                50
              </option>
              <option value="100" [selected]="paginationModel.pageSize == 100">
                100
              </option>
            </select>
          </label>
        </div>
        <div class="col-auto d-flex">
          <p class="mb-0 d-none d-sm-block me-3 fw-semi-bold text-900">
            Hiển thị {{ paginationModel.firstElementOnPage }} đến
            {{ paginationModel.lastElementOnPage }}
            <span class="text-body-tertiary"> của </span
            >{{ paginationModel.totalElements }} danh mục
          </p>
        </div>
        <div class="col-auto ms-auto d-flex">
          <button
            type="button"
            class="page-link"
            (click)="changePageNumber(1)"
            [class.disabled]="paginationModel.pageNumber <= 1"
          >
            <span class="fas fa-angle-double-left"></span>
          </button>
          <button
            type="button"
            class="page-link"
            (click)="changePageNumber(paginationModel.pageNumber - 1)"
            [class.disabled]="paginationModel.pageNumber <= 1"
          >
            <span class="fas fa-angle-left"></span>
          </button>
          <ul class="mb-0 pagination">
            <li
              class="page-item"
              *ngFor="
                let i of Utils.getVisiblePages(
                  paginationModel.pageNumber,
                  paginationModel.totalPages,
                  5
                )
              "
              [class.active]="i === paginationModel.pageNumber"
            >
              <button
                type="button"
                class="page-link"
                (click)="changePageNumber(i)"
              >
                {{ i }}
              </button>
            </li>
          </ul>
          <button
            type="button"
            class="page-link"
            (click)="changePageNumber(paginationModel.pageNumber + 1)"
            [class.disabled]="
              paginationModel.pageNumber >= paginationModel.totalPages
            "
          >
            <span class="fas fa-angle-right"></span>
          </button>
          <button
            type="button"
            class="page-link"
            (click)="changePageNumber(paginationModel.totalPages)"
            [class.disabled]="
              paginationModel.pageNumber >= paginationModel.totalPages
            "
          >
            <span class="fas fa-angle-double-right"></span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="modal fade" id="modalemployee" tabindex="-1" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title" id="modalemployeeLabel">{{ titleModal }}</h5>
        <button
          class="btn p-1"
          data-bs-dismiss="modal"
          aria-label="Close"
          #btnCloseModal
        >
          <span class="fas fa-times fs-9"></span>
        </button>
      </div>
      <form class="form" [formGroup]="employeeForm" (submit)="onSubmit()">
        <div class="modal-body">
          <div class="row px-3" *ngIf="errorMessage != ''">
            <label
              class="col-sm-12 col-form-label fs-9 alert alert-subtle-danger p-2"
              role="alert"
            >
              {{ errorMessage }}
            </label>
          </div>
          <span formGroupName="userId"></span>

          <div class="row mb-3">
            <label class="col-sm-4 col-form-label fs-9" for="avatar"
              >Ảnh đại diện</label
            >
            <div class="avatar avatar-5xl avatar-bordered me-4 ms-10">
              <img
                class="rounded-circle"
                src="{{ avatarSrc }}"
                alt="Avatar"
                (click)="avatarInput.click()"
                style="cursor: pointer"
              />
              <input
                class="form-control"
                id="avatar"
                type="file"
                accept="image/*"
                style="display: none"
                #avatarInput
                (change)="onFileSelected($event)"
              />
            </div>
          </div>
          <div class="row mb-3">
            <label class="col-sm-4 col-form-label fs-9" for="fullName"
              >Tên nhân viên</label
            >
            <div class="col-sm-8">
              <input
                class="form-control"
                id="fullname"
                type="text"
                placeholder="Tên nhân viên"
                formControlName="fullName"
              />
              <small
                class="text-danger mt-1"
                *ngIf="employeeForm['controls']['fullName'].dirty"
              >
                <span
                  *ngIf="employeeForm['controls']['fullName'].errors?.['required']"
                >
                  Tên nhân viên không được để trống
                </span>
                <span
                  *ngIf="employeeForm['controls']['fullName'].errors?.['maxlength']"
                >
                  Tên nhân viên không được vượt quá 50 ký tự
                </span>
              </small>
            </div>
          </div>

          <div class="row mb-3">
            <label class="col-sm-4 col-form-label fs-9" for="phoneNumber"
              >Số điện thoại</label
            >
            <div class="col-sm-8">
              <input
                class="form-control"
                id="phoneNumber"
                type="text"
                placeholder="Số điện thoại"
                formControlName="phoneNumber"
              />
              <small
                class="text-danger mt-1"
                *ngIf="employeeForm['controls']['phoneNumber'].dirty"
              >
                <span
                  *ngIf="employeeForm['controls']['phoneNumber'].errors?.['required']"
                >
                  Số điện thoại không được để trống
                </span>
                <span
                  *ngIf="employeeForm['controls']['phoneNumber'].errors?.['maxlength']
                  || employeeForm['controls']['phoneNumber'].errors?.['minlength']"
                >
                  Số điện thoại phải đủ 10 số
                </span>
                <span
                  *ngIf="!(employeeForm['controls']['phoneNumber'].errors?.['maxlength']
                              || employeeForm['controls']['phoneNumber'].errors?.['minlength'])
                              && employeeForm['controls']['phoneNumber'].errors?.['pattern']"
                >
                  Số điện thoại không hợp lệ
                </span>
              </small>
            </div>
          </div>

          <div class="row mb-3">
            <label class="col-sm-4 col-form-label fs-9" for="gender"
              >Giới tính</label
            >
            <div class="col-sm-8">
              <select
                class="form-select"
                id="basic-form-gender"
                aria-label="Default select example"
                formControlName="gender"
              >
                <option selected="selected">Chọn giới tính</option>
                <option value="Nam">Nam</option>
                <option value="Nữ">Nữ</option>
              </select>
            </div>
          </div>
          <div class="row mb-3">
            <label class="col-sm-4 col-form-label fs-9" for="birthday"
              >Ngày sinh</label
            >
            <div class="col-sm-8">
              <input
                class="form-control"
                id="birthday"
                rows="3"
                placeholder="Ngày sinh"
                formControlName="birthday"
                type="date"
                value="{{ birthday | date : 'yyyy-MM-dd' }}"
              />
              <small
                class="text-danger mt-1"
                *ngIf="employeeForm['controls']['birthday'].dirty"
              >
                <span
                  *ngIf="employeeForm['controls']['birthday'].errors?.['required']"
                >
                  Ngày sinh không được để trống
                </span>
              </small>
            </div>
          </div>
          <div class="row mb-3">
            <label class="col-sm-4 col-form-label fs-9" for="email"
              >Email</label
            >
            <div class="col-sm-8">
              <input
                class="form-control"
                id="email"
                rows="3"
                placeholder="Email"
                formControlName="email"
              />
              <small
                class="text-danger mt-1"
                *ngIf="employeeForm['controls']['email'].dirty"
              >
                <span
                  *ngIf="employeeForm['controls']['email'].errors?.['required']"
                >
                  Email không được để trống
                </span>
                <span
                  *ngIf="employeeForm['controls']['email'].errors?.['email']"
                >
                  Email không đúng định dạng
                </span>
              </small>
            </div>
          </div>
          <div class="row mb-3">
            <label class="col-sm-4 col-form-label fs-9" for="address"
              >Địa chỉ</label
            >
            <div class="col-sm-8">
              <input
                class="form-control"
                id="address"
                rows="3"
                placeholder="address"
                formControlName="address"
              />
              <small
                class="text-danger mt-1"
                *ngIf="employeeForm['controls']['address'].dirty"
              >
                <span
                  *ngIf="employeeForm['controls']['address'].errors?.['required']"
                >
                  Địa chỉ không được để trống
                </span>
              </small>
            </div>
          </div>
        </div>
        <div class="modal-footer">
          <button
            class="btn btn-primary"
            type="submit"
            [disabled]="employeeForm.invalid"
          >
            <span [class.d-none]="isDisplayNone">{{ btnSave }}</span>
            <span class="indicator-progress" [class.d-none]="!isDisplayNone">
              Vui lòng chờ...
              <span
                class="spinner-border spinner-border-sm align-middle ms-2"
              ></span>
            </span>
          </button>

          <button
            class="btn btn-outline-primary"
            type="button"
            data-bs-dismiss="modal"
          >
            Quay lại
          </button>
        </div>
      </form>
    </div>
  </div>
</div>
